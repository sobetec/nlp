<!doctype html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>NLP -News List</title>
    <link rel="stylesheet" href="css/auto-ml.css">
    <link rel="stylesheet" type="text/css" href="datatables/datatables.css">

    <link rel="stylesheet" href="css/w3.css">
    <link rel="stylesheet" href="css/pagination.css">
    <style>
        .card_list {
            flex-direction: row !important;
        }

        /*chart part*/
        body {
            font-family: Helvetica, Arial, sans-serif;
        }

        .axis-grid line {
            stroke: rgb(190, 190, 190);
            stroke-width: 0.5;
        }

        #power-gauge g.arc {
            fill: steelblue;
        }

        #power-gauge g.pointer {
            fill: #e85116;
            stroke: #b64011;
        }

        #power-gauge g.label text {
            text-anchor: middle;
            font-size: 14px;
            font-weight: bold;
            fill: #666;
        }

        #example {
            text-align: center;
            font-size: 11px;
        }

        #example_news {
            text-align: center;
            font-size: 11px;
        }

        #example_report {
            text-align: center;
            font-size: 11px;
        }

        /*news and report part*/
        #example_report,
        #example_news,
        #example,
        #industry_news_list,
        #subsidiary_news_list {
            text-align: center;
            font-size: 12px;
        }

        /* The Modal (background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content/Box */
        .modal-content {
            background-color: #fefefe;
            margin: -6% auto;
            /* 15% from the top and centered */
            padding-top: 10px;
            padding-bottom: 10px;
            padding-left: 20px;
            padding-right: 10px;
            width: 72%;
            /* Could be more or less, depending on screen size */
            min-height: 300px;
            position: relative;
            vertical-align: middle;
        }

        .modal-title {
            margin: 6% auto;
            /* 15% from the top and centered */
            min-height: 30px;
            background-color: #2266a5;
            text-align: center;
            vertical-align: middle;
            position: relative;
            padding: 13px;
            width: 72%;
            /* Could be more or less, depending on screen size */
        }

        .modal-close {
            background-color: #fefefe;
            margin: 6% auto;
            padding-top: 10px;
            padding-bottom: 10px;
            padding-left: 20px;
            padding-right: 20px;
            width: 72%;
            min-height: 50px;
            position: relative;
            vertical-align: middle;
        }

        .modal-title .btn_close {
            position: absolute;
            right: 20px;
        }

        .modal-title .btn_close:before {
            content: '';
            display: block;
            width: 24px;
            height: 24px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23fefefe'%3E%3Cg%3E%3Cpath d='M19.97 3.09l.85.849-8.062 8.06 8.061 8.062-.848.849-8.062-8.062-8.06 8.062L3 20.06l8.061-8.062L3 3.94l.849-.849 8.06 8.061 8.062-8.06z' transform='translate(-1612 -4656) translate(1612 4656)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        .iframecss {
            height: 70vh;
            width: 100%;
            /* border-top: 1px solid; */
        }

        .modal-loading {
            background-color: #fefefe;
            margin: 10% auto;
            /* 15% from the top and centered */
            padding: 40px;
            border: 1px solid #888;
            width: 70%;
            /* Could be more or less, depending on screen size */
            min-height: 400px;
            position: relative;
        }

        .modal-list-head {
            background-color: #fefefe;
            margin: 5% auto;
            /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 60%;
            /* Could be more or less, depending on screen size */
            max-height: 60px;
            position: relative;
        }

        .modal-list {
            background-color: #fefefe;
            margin: -5% auto;
            /* 15% from the top and centered */
            padding: 40px;
            border: 1px solid #888;
            width: 60%;
            /* Could be more or less, depending on screen size */
            max-height: 600px;
            position: relative;
            overflow-y: scroll;
        }


        * {
            box-sizing: border-box;
            /*scrollbar-color: transparent transparent;*/
            /* thumb and track color */
            scrollbar-width: 5px;
        }

        *::-webkit-scrollbar {
            width: 5;
        }

        *::-webkit-scrollbar-track {
            /*background: transparent;*/
        }

        *::-webkit-scrollbar-thumb {
            /*background: transparent;*/
            border: none;
        }

        * {
            -ms-overflow-style: none;
        }

        .carousel {
            position: relative;
            /*margin-top: 12%;*/
            filter: drop-shadow(0 0 10px #0003);
            perspective: 100px;
            background-color: rgb(199, 190, 108);
        }

        .carousel::before,
        .carousel::after,
        .carousel__prev,
        .carousel__next {
            position: absolute;
            top: 0;
            margin-top: 1.2%;
            width: 2rem;
            height: 2rem;
            transform: translateY(-50%);
            border-radius: 50%;
            font-size: 0;
            outline: 0;
        }

        .carousel::before,
        .carousel__prev {
            left: 7rem;
        }

        .carousel::after,
        .carousel__next {
            right: 7rem;
        }

        .carousel::before {
            content: '';
            z-index: 1;
            /*background-color: #333;*/
            /* background-color: rgb(49, 156, 22); */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 1rem;
            line-height: 2rem;
            text-align: center;
            pointer-events: none;
        }

        .carousel::after {
            content: '';
            z-index: 1;
            /* background-color: #cfd0ec; */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 2rem;
            line-height: 3rem;
            text-align: center;
            pointer-events: none;
        }

        .carousel::before {
            background-image: url("img/left-arrow.png");
        }

        .carousel::after {
            background-image: url("img/right-arrow.png");
        }

        .carouselNoPrev {
            position: relative;
            perspective: 100px;
        }

        .carouselNoPrev::before,
        .carouselNoPrev::after,
        .carouselNoPrev__prev,
        .carouselNoPrev__next {
            position: absolute;
            top: 0;
            margin-top: 1.2%;
            width: 2rem;
            height: 2rem;
            transform: translateY(-50%);
            border-radius: 50%;
            font-size: 0;
            outline: 0;
        }

        .carouselNoPrev::before,
        .carouselNoPrev__prev {
            left: 7rem;
        }

        .carouselNoPrev::after,
        .carouselNoPrev__next {
            right: 7rem;
        }

        .carouselNoPrev::before {
            opacity: 0;
            content: '';
            z-index: 1;
            /* background-color: rgb(168, 199, 54); */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 1rem;
            line-height: 2rem;
            text-align: center;
            pointer-events: none;
        }

        .carouselNoPrev::after {
            content: '';
            z-index: 1;
            /* background-color: rgb(173, 48, 167); */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 2rem;
            line-height: 3rem;
            text-align: center;
            pointer-events: none;
        }


        .carouselNoPrev::before {
            background-image: url("img/left-arrow.png");
        }

        .carouselNoPrev::after {
            background-image: url("img/right-arrow.png");
        }


        .carouselNoNext {
            position: relative;
            perspective: 100px;
        }

        .carouselNoNext::before,
        .carouselNoNext::after,
        .carouselNoNext__prev,
        .carouselNoNext__next {
            position: absolute;
            top: 0;
            margin-top: 1.2%;
            width: 2rem;
            height: 2rem;
            transform: translateY(-50%);
            border-radius: 50%;
            font-size: 0;
            outline: 0;
        }

        .carouselNoNext::before,
        .carouselNoNext__prev {
            left: 7rem;
        }

        .carouselNoNext::after,
        .carouselNoNext__next {
            right: 7rem;
        }

        .carouselNoNext::before {
            content: '';
            z-index: 1;
            /* background-color: rgb(40, 185, 178); */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 1rem;
            line-height: 2rem;
            text-align: center;
            pointer-events: none;
        }

        .carouselNoNext::after {
            opacity: 0;
            content: '';
            z-index: 1;
            /* background-color: rgb(255, 255, 255); */
            background-size: 1rem 1rem;
            background-repeat: no-repeat;
            background-position: center center;
            color: #fff;
            font-size: 2rem;
            line-height: 3rem;
            text-align: center;
            pointer-events: none;
        }


        .carouselNoNext::before {
            background-image: url("img/left-arrow.png");
        }

        .carouselNoNext::after {
            background-image: url("img/right-arrow.png");
        }


        /* fold */
        .menu a {
            cursor: pointer;
        }

        .fold a {
            cursor: pointer;
        }

        .menu .hide li:hover {

            text-decoration: underline;
            cursor: pointer;
            font-size: 14px;
            font-weight: bolder;
            color: #7c130c;
        }

        .menu .hide {
            display: none;
            font-size: 14px;

        }


        .visivi {
            visibility: visible;
            font-size: 13px;
            font-weight: bold;
            position: absolute;
            color: #0d1775;
        }

        .closed {
            visibility: hidden;
            font-size: 13px;
            font-weight: bold;
            position: relative;
            color: #090b88;
        }

        .list li:hover,
        .list_company li:hover,
        .list_subsidiary li:hover,
        .list_industry li:hover {
            text-decoration: underline;
            cursor: pointer;
            font-size: 14px;
            font-weight: bolder;
            color: #7c130c;
        }

        .list li,
        .list_company li,
        .list_subsidiary li,
        .list_industry li {
            font-size: 14px;
        }

        .td_comp:hover,
        .td_subs:hover,
        .td_inds:hover {
            text-decoration: underline;
            cursor: pointer;
            font-size: 14px;
            font-weight: bolder;
            color: #7c130c;
        }

        .td_comp,
        .td_subs,
        .td_inds {
            font-size: 14px;
            text-align: left;
            padding-left: 16px;
            padding-right: 10px;
        }

        .th_list {
            font-size: 16px;
            text-align: left;
            padding-left: 16px;
            padding-right: 10px;
            font-weight: bold;
            background-color: #f7f7f7;
        }



        .disabled {
            pointer-events: none;
            opacity: 0.6;
        }

        .nulls {
            display: none;
        }

        /*플로팅 버튼 탑 바텀*/
        #myBtn {
            display: none;
            position: fixed;
            bottom: 70px;
            right: 30px;
            z-index: 99;
            font-size: 18px;
            border: none;
            outline: none;
            background-color: #820812;
            color: white;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            opacity: 40%;
        }

        #myBtn2 {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 30px;
            z-index: 99;
            font-size: 18px;
            border: none;
            outline: none;
            background-color: #820812;
            color: white;
            cursor: pointer;
            padding: 8px;
            /*버튼크기*/
            border-radius: 4px;
            opacity: 40%;
        }

        #myBtn:hover {
            background-color: #820812;
            opacity: 98%;
        }

        #myBtn2:hover {
            background-color: #820812;
            opacity: 98%;
        }

        .select[multiple] {
            background-color: white;
            border-radius: 4px;
        }

        .comp_td:nth-child(even) {
            background-color: #f0ecec;
        }

        .comp_td:nth-child(odd) {
            background-color: #f7f7f7;
        }

        .maximize {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%2300587a'%3E%3Cg%3E%3Cg%3E%3Cpath d='M8 .5v1l-7-.001v14l14 .001v-7h1v8h-1l-14-.001v.001H0V.5h8zm8 6h-1V2.196L9.525 7.671l-.707-.707L14.281 1.5H10v-1h6v6z' transform='translate(-484 -6997) translate(484 6997) translate(2 1.5)'/%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/g%3E%3C/svg%3E%0A");
            opacity: 60%;
            padding-left: 3px;
            padding-bottom: 3px;

        }

        .maximize:hover {

            opacity: 40%;
            cursor: pointer;
        }

        .system_code {
            font-size: 14px;
            font-weight: bolder;
            font-style: oblique;
        }
    </style>

    <script type="text/javascript" src="js/jquery-3.5.1.js"></script>
    <script type="text/javascript" charset="utf8" src="datatables/datatables.js"></script>
    <script type="text/javascript" src="js/pagination.js"></script>
    <script>

        $(document).ready(function () {
            createEmptyDatatableNews();
            createEmptyDatatableReport();
            $('#example_report').DataTable();
            setDisplay();
            $('#date_picker_div_News').hide();
            $('#condition').hide();
            $('#condition_report').hide();
            $('#resetContentButton').hide();
            $('#gaugeExp').css("visibility","hidden");
            // document.getElementById("articleCountRange").disabled = true;
            document.getElementById("scroll_button").onscroll = function () { scrollFunction() };
        });

        function viewNewsContents(i) {
            // //console.log(window.newsResponseData[i]);
            // //console.log(window.newsResponseData[i].indexNum);
            // //console.log(window.newsResponseData.length);

            var prev = ``;
            var next = ``;
            var j = -1;
            var k = -1;
            var carouselOption = "";

            if (i != 0 && i != window.newsResponseData.length - 1) {
                j = i - 1;
                k = i + 1;
                prev = `<a href="javascript:viewNewsContents(` + j + `);" class="carousel__prev">Go to last slide</a>`;
                next = `<a href="javascript:viewNewsContents(` + k + `);" class="carousel__next">Go to next slide</a>`;
                carouselOption = "carousel";
            }
            else if (i == 0) {
                k = i + 1;
                prev = ``;
                next = `<a href="javascript:viewNewsContents(` + k + `);" class="carousel__next">Go to next slide</a>`;
                carouselOption = "carouselNoPrev";
            }
            else if (i == window.newsResponseData.length - 1) {
                j = i - 1;
                prev = `<a href="javascript:viewNewsContents(` + j + `);" class="carousel__prev">Go to last slide</a>`;
                next = ``;
                carouselOption = "carouselNoNext";
            }

            var sectionHtml =
                `   
                <section class="` + carouselOption + `" aria-label="Gallery" style="background-color: #FFF;">
                    <div class="carousel__snapper">
                        ` + prev + next + `
                    </div>
                </section>  
            `;


            var modalhtml =
                `   
                <div class="modal-title">
                    ` + sectionHtml + `
                    <p style="text-align: center; vertical-align: middle;">
                        <b>
                            <span style="font-size: 13pt; color:white; vertical-align: middle;">` + window.newsResponseData[i].newsTtl + `</span>
                                <button class="btn_close" onClick="close_pop();"><span class="blind">닫기</span></button>
                            </span>
                            
                        </b>
                    </p>
                </div>

                <div class="modal-content">

                    <section>
                        <div>
                            
                            <table style="width:100%;">
                                <tr>
                                    <td>
                                        <p style="text-align: right; line-height: 1; padding-right:20px;"><br />` + window.newsResponseData[i].newsDate + `</p>
                                    </td>
                                </tr>
                            </table>
                            
                        </div>
                        <iframe name="modal_frame" class="iframecss" frameBorder="0"></iframe>
                    </section>

                    <div>
                    </div>

                </div>
                
            `;
            document.getElementById('myModal').innerHTML = modalhtml;
            frames.modal_frame.document.body.innerHTML = window.newsResponseData[i].rawData;
            //frames.modal_frame2.document.body.innerHTML = window.newsResponseData[i].rawData;
            $('#myModal').show();

            var temp = `<div style="border: 1px solid #888;">
                                            <p style="text-align: center; line-height: 1.5;"><br />` + window.newsResponseData[i].rawData + `</p>
                                        </div>`;
        }


        function loading1(loading) {
            var modalhtml1 =
                `
            <div class="modal-loading">
                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;">` + loading + ` 목록 불러오는 중...</span></b></span></p>
                <button type="button" class="close" onClick="close_pop();"></button>
                <p style="text-align: center; line-height: 1.5;"><br />데이터 베이스에서 읽어오고 있습니다.</p>
                <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                <p><br /></p>
                <p style="text-align: center; line-height: 1.5;"><br />
                    <img src="/img/loading.gif" align="center"/>
                </p>
            </div>
            `;
            document.getElementById('myModal').innerHTML = modalhtml1;
            $('#myModal').show();
        }

        function keywordLoading1(count) {
            var modalhtml1 =
                `
            <div class="modal-loading">
                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;"> 뉴스 목록 불러오는 중...</span></b></span></p>
                <button type="button" class="close" onClick="close_pop();"></button>
                <p style="text-align: center; line-height: 1.5;"><br />총 ` + count + `건을 데이터 베이스에서 읽어오고 있습니다.</p>
                <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                <p><br /></p>
                <p style="text-align: center; line-height: 1.5;"><br />
                    <img src="/img/loading.gif" align="center"/>
                </p>
            </div>
            `;
            document.getElementById('myModal').innerHTML = modalhtml1;
            $('#myModal').show();
        }

        function keywordLoading2(count) {
            var modalhtml1 =
                `
            <div class="modal-loading">
                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;">뉴스 목록 불러오는 중...</span></b></span></p>
                <button type="button" class="close" onClick="close_pop();"></button>
                <p style="text-align: center; line-height: 1.5;"><br />총 ` + count + `건을 화면에 표출중입니다.</p>
                <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                <p><br /></p>
                <p style="text-align: center; line-height: 1.5;"><br />
                    <img src="/img/loading.gif" align="center"/>
                </p>
            </div>
            `;
            document.getElementById('myModal').innerHTML = modalhtml1;
            $('#myModal').show();
        }

        function drawTable(result_area, table_id) {

            if (table_id === '') {
                table_id = 'example';
            }

            /* <table id="`+table_id+`" class="display" style="width:100%"> */
            var htmlStart =
                `
            <table id="`+ table_id + `" class="display" style="width:100%">
                        <colgroup>
                            <col>
                        </colgroup>
                        <thead>
                        <tr>
                            <th style="width:7%">인덱스</th>
                            
                            <th style="width:12%">날짜</th>
                            <th>기업명</th>
                            <th>제목</th>
                            <th style="width:13%">스코어</th>
                            <th style="width:7%">분류</th>
                        </tr>
                        </thead>
                        <tbody>
            `;

            for (var i = 0; i < window.newsResponseData.length; i++) {
                var indexNum = i + 1;
                window.newsResponseData[i].indexNum = indexNum;
                var sscoreWord = newsResponseData[i].taScreWord;
                var sscore = 0;

                if (newsResponseData[i].taScre != NaN) {
                    tempSscore = Math.round(newsResponseData[i].taScre).toString();;
                    if (tempSscore.match(/^[0-9]$/) != null) {
                        sscore = '0' + tempSscore;
                    } else {
                        sscore = tempSscore;
                    }
                    ////console.log(sscore);
                };


                var rred = '';
                var procc = '';

                if (sscoreWord == '중립') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #32880a!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#32880a;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '부정') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #2196F3!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#2196F3;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '긍정') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #a31b1b!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#a31b1b;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '없음') {
                    procc = `<td>no score</td>`
                    rred = `<td style='color:black'>` + sscoreWord + `</td>`;
                }


                var hiddenData = escapeHtml(window.newsResponseData[i].rawData);

                if (window.newsResponseData[i].cmpyName == null) {
                    window.newsResponseData[i].cmpyName = '';
                }

                var htmlContents =
                    `
                    <tr>
                        <td>` + indexNum + `</td>

                        <td>` + window.newsResponseData[i].newsDate + `</td>
                        <td>` + window.newsResponseData[i].cmpyName + `</td>
                        <td><a href="javascript:viewNewsContents(` + i + `);">` + window.newsResponseData[i].newsTtl + `</a>
                            <input type="hidden" id="hidden` + i + `" value="` + hiddenData + `"/>
                            </td>
                        `+ procc + `
                        `+ rred + `
                    </tr>
                `;
                htmlStart = htmlStart + htmlContents;
            }

            var htmlEnd =
                `
                </tbody>
            </table>
            `;

            document.getElementById(result_area).innerHTML = htmlStart + htmlEnd;

            $('#' + table_id).DataTable();
            close_pop();
        }

        var entityMap = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;', '/': '&#x2F;', '`': '&#x60;', '=': '&#x3D;' };

        function escapeHtml(string) {
            return String(string).replace(/[&<>"'`=\/]/g,
                function (s) {
                    return entityMap[s];
                });
        }


        function drawTableReport() {
            var htmlStart =
                `
            <table id="example_report" class="display" style="width:100%">
                        <colgroup>
                            <col>
                        </colgroup>
                        <thead>
                        <tr>
                            <th>인덱스</th>
                            <th>날짜</th>
                            <th>제목</th>
                            <th>스코어</th>
                            <th>분류</th>
                            <th>타입</th>
                            <th>첨부</th>
                        </tr>
                        </thead>
                        <tbody id="tbodyReport">
            `;

            for (var i = 0; i < window.reportResponseData.length; i++) {
                var indexNum = i + 1;
                window.reportResponseData[i].indexNum = indexNum;
                var sscoreWord = reportResponseData[i].taScreWord;
                var sscore = 0;

                if (reportResponseData[i].taScre != NaN) {
                    tempSscore = Math.round(reportResponseData[i].taScre).toString();;
                    if (tempSscore.match(/^[0-9]$/) != null) {
                        sscore = '0' + tempSscore;
                    } else {
                        sscore = tempSscore;
                    }
                    ////console.log(sscore);
                };


                var rred = '';
                var procc = '';

                if (sscoreWord == '중립') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #32880a!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#32880a;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '부정') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #2196F3!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#2196F3;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '긍정') {
                    procc = `<td><div style="width:100%; border:0.5px solid grey; height:7px; color:#000!important; background-color:#dadada!important; border-radius:6px" >
                    <div style="height:7px; padding:0.01em; width:`+ sscore + `%; color: #fff!important;
                    background-color: #a31b1b!important; border-radius: 7px; font-size: 0%;" >`+ sscore + `</div>
                </div></td>`
                    rred = `<td style='color:#a31b1b;'>` + sscoreWord + `</td>`;
                } else if (sscoreWord == '없음') {
                    procc = `<td>no score</td>`
                    rred = `<td style='color:black'>` + sscoreWord + `</td>`;
                }

                // //console.log(window.reportResponseData[i].orgnFileName);
                var downImg = '';
                var paramFileName = window.reportResponseData[i].orgnFileName;

                paramFileName = paramFileName.replace(/\%/g, "%25");
                paramFileName = paramFileName.replace(/\&/g, "%26");
                paramFileName = paramFileName.replace(/\'/g, "%27");
                paramFileName = paramFileName.replace(/\+/g, "%2B");
                paramFileName = paramFileName.replace(/\=/g, "%3D");
                paramFileName = paramFileName.replace(/\[/g, "%5B");
                paramFileName = paramFileName.replace(/\]/g, "%5D");
                paramFileName = paramFileName.replace(/\,/g, "%2C");
                paramFileName = paramFileName.replace(/\$/g, "%24");
                paramFileName = paramFileName.replace(/\//g, "%2F");
                paramFileName = paramFileName.replace(/\·/g, "%C2%B7");
                paramFileName = paramFileName.replace(/\‘/g, "%E2%80%98");
                paramFileName = paramFileName.replace(/\’/g, "%E2%80%99");
                paramFileName = paramFileName.replace(/\•/g, "%E2%80%A2");

                // //console.log(paramFileName);

                if (window.reportResponseData[i].docCaty == 'pdf') {
                    downImg = `
                                    <a href="/file/` + paramFileName + `.pdf">
                                        <img src="/img/pdf_down.png" style="width: auto; height: 14px;">
                                    </a>
                                `;
                }
                else if (window.reportResponseData[i].docCaty == 'hwp') {
                    downImg = `
                                    <a href="/file/` + window.reportResponseData[i].orgnFileName + `.hwp">
                                        <img src="/img/hwp_down.png" style="width: auto; height: 14px;">
                                    </a>
                                `;
                }
                else {
                    downImg = `<img src="/img/document_download.png" style="width: auto; height: 14px;">`;
                }

                var splitOrgnFileName = window.reportResponseData[i].orgnFileName.split('_')[0];
                // var sliceOrgnFileName = splitOrgnFileName.slice(1);
                // var subPrefixOrgnFileName = sliceOrgnFileName.join('');
                
                let pattern = /^(19|20)\d{2}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[0-1])$/;

                // pattern.test(splitOrgnFileName);

                if (pattern.test(splitOrgnFileName)) {
                    var substrOrgnFileName = window.reportResponseData[i].orgnFileName.substring(11);
                }else {
                    var substrOrgnFileName = window.reportResponseData[i].orgnFileName;
                }
                               

                var htmlContents =
                    `
                    <tr>
                        <td>` + indexNum + `</td>
                        <td>` + window.reportResponseData[i].reportDate + `</td>
                        <td>` + substrOrgnFileName + `</td>
                        `+ procc + `
                        `+ rred + `
                        <td>` + window.reportResponseData[i].docCaty + `</td>
                        <td>
                            ` + downImg + `
                        </a>
                        </td>
                    </tr>
                `;
                htmlStart = htmlStart + htmlContents;
            }

            var htmlEnd =
                `
                </tbody>
            </table>
            `;

            document.getElementById('result_area_report').innerHTML = htmlStart + htmlEnd;

            $('#example_report').DataTable();
            close_pop();
        }

        function countPages(rowCount) {
            var pageCount = 0;
            if (rowCount >= 2000) {
                pageCount = parseInt(rowCount / 2000) + 1;
            } else {
                pageCount = 1;
            }

            return pageCount;
        }

        function parameters() {
            // //console.log("CURRENTLY RUNNING PARAMETERSSSSSS")
            var data = new Object();

            data.newsYear = parseInt($("#newsYear").val());
            data.gubun = $("#gubunNews").val();

            if ($("#gubunNews").val() == "month") {
                var temp = $("#choicesNews").val().split("월")[0];
                // //console.log(temp);
                data.gubunItem = parseInt(temp);
            }
            else if ($("#gubunNews").val() == "quarter") {
                var temp = $("#choicesNews").val().split("분기")[0];
                // //console.log(temp);
                data.gubunItem = parseInt(temp);
            }

            data.startDate = $("#date_from_news").val();
            data.endDate = $("#date_to_news").val();
            data.searchWord = document.getElementById('search_company_news').value;
            data.pageNum = 1;
            data.rowCount = 0;
            data.pageCount = 1;

            return data;
        }

        // 기업이름 조회로 시스템 이름 반환

        function getSystemNameByCompany(companyName) {


            return new Promise(function (resolve, reject) {
                let systemName2;
                $.ajax({
                    url: "/getSystemNameByCompany/" + companyName,
                    method: 'GET',
                    async: false,
                    // dataType: 'json',
                    success: function (dataaa) {
                        // alert('시스템 네임 조회 성공');
                        //console.log('시스템 네임 조회 성공했을시 리스펀스 데이타=  ' + dataaa);
                        systemName2 = dataaa;

                    },
                    error: function () {
                        alert('시스템 코드 널 못받았씁니다...');
                        systemName2 = null;
                    }

                });

                resolve(systemName2);
                //console.log('함수내부' + systemName2);
            });
            //  return systemName2;
        }




        function getRowCount() {
            let datassss = parameters();
            //console.log(parameters());
            let selectItem = $("#fold").val();
            let companyName = window.companyName;
            datassss.selectedName = companyName;
            datassss.gubunJaName = selectItem;
            loading1("뉴스");

            $.ajax({
                url: "/getRowCount",
                method: 'POST',
                data: datassss,
                dataType: 'json',
                success: function (responseData) {
                    // //console.log(responseData);
                    datassss.rowCount = responseData;

                    switch (selectItem) {
                        case "keyword":

                            if (datassss.rowCount == 0) {
                                alert('뉴스기사가 없습니다');
                                datassss.pageCount = 0;
                                $('#myModal').hide();

                            } else {
                                alert('총 ' + datassss.rowCount + ' 건의 뉴스 기사가 검색되었습니다.');
                                datassss.pageCount = countPages(datassss.rowCount);
                                getChartQuery(datassss.searchWord, 3);
                                topFunction();
                                paginationByRowCount(datassss);

                                document.getElementById('main_title').focus();
                            }

                            break;
                        default:

                            if (datassss.rowCount < 30) {
                                waitTime();
                                async function waitTime() {

                                    var yesNo = confirm('\n해당 기업의 뉴스 목록이 30건('+datassss.rowCount +') 미만입니다.\n'+
                                        '상위 카테고리로 검색하시겠습니까?\n\n' +
                                        '취소를 누르면 \"'+companyName+'\" (으)로 검색 됩니다.');

                                    
                                    if (yesNo == true) {
                                        var systemName = await getSystemNameByCompany(companyName);
                                        //console.log('시스템이름 잘나오나 ?  = ' + systemName);
                                        //console.log('컨펌창에서 컴퍼니내임 잘받았나 ' + companyName);

                                        systemName = systemName + '_system';



                                        if (systemName != null) {

                                            //console.log(systemName);
                                            getNewsListByIndustryAndSubsidiary('industry', systemName);
                                        } else {
                                            alert('상위 산업 Category가 없습니다. (system_code not found) ');
                                            $('#myModal').hide();

                                        }

                                    }
                                    else if (yesNo == false) {
                                        getNewsListByCompanyName(companyName);

                                    }

                                }

                            } else {
                                getNewsListByCompanyName(companyName);

                            }

                            break;



                    }


                },
                error: function () {
                    alert('rowCount 조회실패');

                }

            });

        }

        function paginationByRowCount(data) {
            var pageLength = data.pageCount;
            var sources = function () {
                var result = [];

                for (var i = 1; i <= pageLength; i++) {
                    result.push(i);
                }

                return result;
            }();

            $('#pagination-container').pagination({
                dataSource: sources,
                pageSize: 1,
                pageRange: 1,
                showGoInput: true,
                showGoButton: true,
                showNavigator: true,
                callback: function (pagination) {
                    //    //     var html = _.template($('#template-demo').html(), {
                    //    //         data: data
                    //    //     });
                    //    //$('#data-container').html(html);
                    data.pageNum = pagination[0];
                    //window.data = data ;
                    //pageData = window.data ;
                    //console.log(pagination);
                    getNewsList(data);
                }
            });
        }




        function getNewsList(data) {

            var result_area = "result_area_news";
            var table_id = "example_news";
            data.gubunJaName = "keyword";
            //console.log(data);

            keywordLoading1(data.rowCount);

            $.ajax({
                url: "/getNewsListByCondition",
                method: 'POST',
                data: data,
                dataType: 'json',
                success: function (responseData) {
                    //alert('조회 성공');
                    //console.log(responseData.length);
                    window.newsResponseData = responseData;
                    window.newsResponseData.selectedName = data.searchWord;
                    // //console.log(window.newsResponseData[0]);
                    $('#result_area_news').show();

                    $('#myModal').hide();

                    document.getElementById('myModal').innerHTML = modalhtml2;
                    $('#myModal').show();
                    setTimeout(() => drawTable(result_area, table_id), 1000);
                    $('#gaugeExp').css("visibility","visible");

                },
                error: function () {
                    alert('조회 실패');
                    $('#myModal').hide();
                }
            });

        }

        function getNewsListByCompanyName(companyName) {


            var data = parameters();
            data.searchWord = document.getElementById('search_company_news').value;
            data.selectedName = companyName;
            data.gubunJaName = 'company';
            //console.log(data);
            var result_area = 'result_area_news';

            loading1("뉴스");

            $.ajax({
                url: "/getNewsListByCompanyName",
                method: 'POST',
                data: data,
                dataType: 'json',
                success: function (responseData) {
                    //alert('조회 성공');
                    getChartQuery(companyName, 3);
                    //console.log(responseData.length);
                    window.newsResponseData = responseData;
                    window.newsResponseData.selectedName = companyName;
                    //console.log(window.newsResponseData[0]);
                    $('#result_area_news').show();

                    $('#myModal').hide();

                    document.getElementById('myModal').innerHTML = modalhtml2;
                    $('#myModal').show();

                    document.getElementById('main_title').innerHTML = `뉴스 조회<h4 style="display:inline">(` + companyName + `)</h4>`;
                    $('#chartDiv').show();
                    setTimeout(() => drawTable(result_area, ''), 1000);
                    $('#gaugeExp').css("visibility","visible");
                    topFunction();

                    document.getElementById('main_title').focus();

                },
                error: function () {
                    if (data.gubun == "custom" && (data.startDate == null || data.endData == null)) {
                        alert('시작 날짜 및 끝 날짜를 입력 해 주세요.');
                    }
                    else {
                        alert('조회 실패');
                    }
                    $('#myModal').hide();
                }
            });

        }


        function getReportList() {
            var data = new Object();

            data.reportYear = parseInt($("#reportYear").val());
            data.gubun = $("#gubunReport").val();

            if ($("#gubunReport").val() == "month") {
                var temp = $("#choicesReport").val().split("월")[0];
                // //console.log(temp);
                data.gubunItem = parseInt(temp);
            }
            else if ($("#gubunReport").val() == "quarter") {
                var temp = $("#choicesReport").val().split("분기")[0];
                // //console.log(temp);
                data.gubunItem = parseInt(temp);
            }

            data.startDate = $("#date_from_report").val();
            data.endDate = $("#date_to_report").val();
            data.searchWord = document.getElementById('search_company_report').value;

            // //console.log(data);

            loading1("행내 보고서");

            $.ajax({
                url: "/getReportListByCondition",
                method: 'POST',
                data: data,
                dataType: 'json',
                success: function (responseData) {
                    //alert('조회 성공');
                    //console.log(responseData.length);
                    if (responseData.length != 0) {
                        window.reportResponseData = responseData;
                        // //console.log(window.reportResponseData[0]);

                        $('#myModal').hide();

                        document.getElementById('myModal').innerHTML = modalhtml3;
                        $('#myModal').show();
                        setTimeout(() => drawTableReport(), 1000);
                    }
                    else {
                        $('#myModal').hide();
                        alert('보고서가 없습니다');
                    }
                },
                error: function () {
                    if (data.gubun == "custom" && (data.startDate == null || data.endData == null)) {
                        alert('시작 날짜 및 끝 날짜를 입력 해 주세요.');
                    }
                    else {
                        alert('조회 실패');
                    }
                    $('#myModal').hide();
                }
            });
        }


        var modalhtml2 =
            `
                <div class="modal-loading">
                    <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;">뉴스 목록 불러오는 중...</span></b></span></p>
                    <button type="button" class="close" onClick="close_pop();"></button>
                    <p style="text-align: center; line-height: 1.5;"><br />화면에 표출중입니다.</p>
                    <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                    <p><br /></p>
                    <p style="text-align: center; line-height: 1.5;"><br />
                        <img src="/img/loading.gif" align="center"/>
                    </p>
                </div>
            `;

        var modalhtml3 =
            `
                <div class="modal-loading">
                    <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;">보고서 목록 불러오는 중...</span></b></span></p>
                    <button type="button" class="close" onClick="close_pop();"></button>
                    <p style="text-align: center; line-height: 1.5;"><br />화면에 표출중입니다.</p>
                    <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                    <p><br /></p>
                    <p style="text-align: center; line-height: 1.5;"><br />
                        <img src="/img/loading.gif" align="center"/>
                    </p>
                </div>
            `;

        var modalhtml4 =
            `
                <div class="modal-loading">
                    <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 24pt;">차트 데이터 불러오는 중...</span></b></span></p>
                    <button type="button" class="close" onClick="close_pop();"></button>
                    <p style="text-align: center; line-height: 1.5;"><br />화면에 표출중입니다.</p>
                    <p style="text-align: center; line-height: 1.5;"><br />잠시만 기다려 주십시오.</p>
                    <p><br /></p>
                    <p style="text-align: center; line-height: 1.5;"><br />
                        <img src="/img/loading.gif" align="center"/>
                    </p>
                </div>
            `;


        var selectListData = {
            quarter: {
                name: 'quarter',
                text: ['1분기', '2분기', '3분기', '4분기'],
                value: ['q1', 'q2', 'q3', 'q4']
            },
            month: {
                name: 'month',
                text: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
                value: ['m1', 'm2', 'm3', 'm4', 'm5', 'm6', 'm7', 'm8', 'm9', 'm10', 'm11', 'm12']
            },
            year: {
                value: 'no'
            },
            custom: {
                value: 'no'
            }
        };

        function itemChangeNews() {

            var selectItem = $("#gubunNews").val();
            //console.log(selectItem);

            var changeItem;

            if (selectItem == "quarter") {
                changeItem = selectListData.quarter.text;
                document.getElementById("choicesNews").disabled = false;
                document.getElementById("newsYear").disabled = false;
                // document.getElementById("articleCountRange").disabled = true;
                $('#yearSelect').show();
                $('#date_picker_div_News').hide();
                $('#condition').show();
            }
            else if (selectItem == "month") {
                changeItem = selectListData.month.text;
                document.getElementById("choicesNews").disabled = false;
                document.getElementById("newsYear").disabled = false;
                // document.getElementById("articleCountRange").disabled = true;
                $('#yearSelect').show();
                $('#date_picker_div_News').hide();
                $('#condition').show();
            }
            else if (selectItem == "year") {
                changeItem = '';
                document.getElementById("choicesNews").disabled = true;
                document.getElementById("newsYear").disabled = false;
                // document.getElementById("articleCountRange").disabled = true;
                $('#yearSelect').show();
                $('#date_picker_div_News').hide();
                $('#condition').hide();
            }
            else if (selectItem == "custom") {
                changeItem = '';
                //document.getElementById("choicesNews").disabled = true;
                //document.getElementById("newsYear").disabled = true;
                // document.getElementById("articleCountRange").disabled = false;
                $('#yearSelect').hide();
                $('#date_picker_div_News').show();
                $('#condition').hide();
            }

            $('#choicesNews').empty();

            for (var count = 0; count < changeItem.length; count++) {
                var option = $("<option>" + changeItem[count] + "</option>");
                $('#choicesNews').append(option);
            }
        }

        function itemChangeReport() {

            $('#date_picker_div_Report').hide();
            var selectItem = $("#gubunReport").val();
            //console.log(selectItem);

            var changeItem;

            if (selectItem == "quarter") {
                changeItem = selectListData.quarter.text;
                document.getElementById("choicesReport").disabled = false;
                document.getElementById("reportYear").disabled = false;
                $('#yearSelectReport').show();
                $('#date_picker_div_Report').hide();
                $('#condition_report').show();
            }
            else if (selectItem == "month") {
                changeItem = selectListData.month.text;
                document.getElementById("choicesReport").disabled = false;
                document.getElementById("reportYear").disabled = false;
                $('#yearSelectReport').show();
                $('#date_picker_div_Report').hide();
                $('#condition_report').show();
            }
            else if (selectItem == "year") {
                changeItem = '';
                document.getElementById("choicesReport").disabled = true;
                document.getElementById("reportYear").disabled = false;
                $('#yearSelectReport').show();
                $('#date_picker_div_Report').hide();
                $('#condition_report').hide();
            }
            else if (selectItem == "custom") {
                changeItem = '';
                // document.getElementById("choicesReport").disabled = true;
                // document.getElementById("reportYear").disabled = true;
                $('#yearSelectReport').hide();
                $('#date_picker_div_Report').show();
                $('#condition_report').hide();
            }

            $('#choicesReport').empty();

            for (var count = 0; count < changeItem.length; count++) {
                var option = $("<option>" + changeItem[count] + "</option>");
                $('#choicesReport').append(option);
            }
        }

        function setDisplay() {
            // itemChangeFold();

            if ($('input:radio[id=news_radio]').is(':checked')) {

                var selectItem = $("#fold").val();
                if (selectItem == "subsidiary" || selectItem == "industry") {
                    var selectNameCheck;
                    if (window.newsResponseData.selectedName.indexOf("_system") != -1) {
                        selectNameCheck = window.newsResponseData.selectedName.split('_');
                        document.getElementById('main_title').innerHTML = `뉴스 조회<h4 style="display:inline">(` + selectNameCheck[0] + `)</h4>`;
                    } else {
                        document.getElementById('main_title').innerHTML = `뉴스 조회<h4 style="display:inline">(` + window.newsResponseData.selectedName + `)</h4>`;
                    }
                }
                else {
                    document.getElementById('main_title').innerText = '뉴스 조회';
                }

                // createEmptyDatatableNews();
                $('#contents_section_news').show();
                $('#contents_section_report').hide();
                $('#date_picker_div_News').hide();
                // $('#example_news').DataTable();
                $('.visualize').show();
                $('#option_set_report').hide();
                $('#option_set_news').show();

            } else {
                document.getElementById('main_title').innerText = '행내 보고서 조회';
                // createEmptyDatatableReport();
                $('#contents_section_report').show();
                $('#contents_section_news').hide();
                $('#date_picker_div_Report').hide();
                // $('#example_report').DataTable();
                $('.visualize').hide();
                $('#option_set_news').hide();
                $('#option_set_report').show();
            }
            document.getElementById('pagination-container').innerHTML = ``;
        }

        //산업별 뉴스 가져오기
        function getNewsListByIndustryAndSubsidiary(gubunJaName, selectedName) {

            var result_area = '';
            var table_id = '';

            var dataIndSub = parameters();
            dataIndSub.gubunJaName = gubunJaName;
            dataIndSub.selectedName = selectedName;

            if (gubunJaName == "industry") {
                result_area = 'result_area_news';
                table_id = 'industry_news_list';
                window.industry = selectedName;
            } else {
                result_area = 'result_area_news';
                table_id = 'subsidiary_news_list';
                window.subsidiary = selectedName;
            };
            $('#chartDiv').hide();
            $('#result_area_news').show();

            //console.log('산업명' + gubunJaName);
            loading1("뉴스");

            $.ajax({
                url: "/getNewsListByIndustryAndSubsidiary",
                method: 'POST',
                dataType: 'json',
                data: dataIndSub,
                success: function (responseData) {
                    //alert('조회 성공');

                    //console.log(responseData.length);
                    window.newsResponseData = responseData;
                    window.newsResponseData.selectedName = dataIndSub.selectedName;

                    var selectNameCheck;
                    if (selectedName.indexOf("_system") != -1) {
                        selectNameCheck = selectedName.split('_');
                        document.getElementById('main_title').innerHTML = `뉴스 조회<h4 style="display:inline">(` + selectNameCheck[0] + `)</h4>`;
                        window.newsResponseData.selectedName = selectNameCheck[0];
                    } else {
                        document.getElementById('main_title').innerHTML = `뉴스 조회<h4 style="display:inline">(` + selectedName + `)</h4>`;
                    }


                    getChartQuery(dataIndSub, 4);

                    //console.log(window.newsResponseData[0]);
                    $('#result_area_industry').hide();
                    $('#result_area_subsidiary').hide();


                    $('#myModal').hide();
                    if ($('#fold').val() == 'subsidiary' || $('#fold').val() == 'industry') {
                        //itemChangeFold();
                        $('#resetContentButton').show();
                        $('#search_box_news').hide();
                        $('#gubunSelect').hide();
                        $('#yearSelect').hide();
                    }

                    $('#chartDiv').show();

                    document.getElementById('myModal').innerHTML = modalhtml2;
                    $('#myModal').show();
                    setTimeout(() => drawTable(result_area, table_id), 1000);
                    $('#gaugeExp').css("visibility","visible");



                    topFunction();

                    document.getElementById('main_title').focus();

                },
                error: function () {
                    alert('조회 실패');
                    $('#myModal').hide();
                }
            });


        }


        function getIndustryAndSubsidiaryList(gubunJa) {

            industry_column_list = ["ㄱ", "ㄴ", "ㄷ", "ㄹ", "ㅁ", "ㅂ", "ㅅ", "ㅇ", "ㅈ", "ㅊ", "ㅋ", "ㅌ", "ㅍ", "ㅎ", "기타"];
            industry_column_list_java = ['responseData[i].giYeok',
                'responseData[i].niEun',
                'responseData[i].diGeut',
                'responseData[i].riEul',
                'responseData[i].miEum',
                'responseData[i].biEup',
                'responseData[i].siOt',
                'responseData[i].iEung',
                'responseData[i].jiEut',
                'responseData[i].chiEut',
                'responseData[i].kiEuk',
                'responseData[i].tiEuk',
                'responseData[i].piEup',
                'responseData[i].hiEut',
                'responseData[i].guiTar'];

            //console.log('구분자 자바스크립' + gubunJa);
            //console.log(industry_column_list[0]);
            //console.log(industry_column_list_java[0]);

            $.ajax({
                url: "/getIndustryAndSubsidiaryList/" + gubunJa,
                method: 'GET',
                dataType: 'json',
                success: function (responseData) {
                    // alert('조회 성공');
                    // //console.log(responseData);
                    ////console.log(responseData[0]);

                    //var gigi = eval(industry_column_list_java[0]);
                    //				//console.log(gigi);

                    var tables = ``;

                    var categoryMark = `
                    <div style="float:left; font-size:13px;"> &nbsp;&nbsp;* 표시가 있는 경우 산업별 59개 Category </div>
                    `;

                    var expend_all = `
                    <div class="buttons" align="right" >
                        <a id="toggleee" class="btn" style="min-width: 110px;" href="javascript:togglee();">전체 펼치기</a>    
                    </div>
                    `;

                    for (var n = 0; n < 3; n++) {
                        var htmlTableHead =
                            `
                        <table style="border-style: none none none none; border-width:2px; border-color:#ccc4c3;" rules=cols>
                            <tr>
                        `;

                        var tds = ``;

                        if (n == 0) { m = 0; r = 5 };
                        if (n == 1) { m = 5; r = 10 };
                        if (n == 2) { m = 10; r = 15 };

                        for (var j = m; j < r; j++) {
                            var colName = industry_column_list[j];

                            ////console.log(colJavaName);
                            var htmlhead =
                                `
                            
                                    <td style="padding-left: 16px; padding-right:10px;" valign="top" width="270">
                                        <div>
                                            <ul >
                                                <li class="menu">
                                                    <a style="font-size: large; font-weight: bold;"> `+ colName + ` </a>
                                                    
                                                    <ul class="list">
                                                        <br/>
                                                                                                            
                            `;

                            var htmlmiddle =
                                `
                                    </ul>
                                    <ul class="hide">
                                `;


                            k = 0;
                            for (var i = 0; i < responseData.length; i++) {
                                var colJavaName = eval(industry_column_list_java[j]);
                                ////console.log('산업별이름 '+colJavaName);
                                if (k < 5) {
                                    if (colJavaName != null) {

                                        if (colJavaName.indexOf("_system") != -1) {
                                            var strArray = colJavaName.split('_');
                                            var htmlli1 =

                                                `
                                                <li class="system_code" value="`+ colJavaName + `">` + strArray[0] + `&nbsp;*</li>
                                                `;
                                        } else {
                                            var htmlli1 =
                                                `
                                                <li value="`+ colJavaName + `">` + colJavaName + `</li>
                                                `;

                                        }

                                        htmlhead += htmlli1;
                                        k++;

                                    }

                                } else if ((colJavaName != null)) {

                                    if (colJavaName.indexOf("_system") != -1) {
                                        var strArray = colJavaName.split('_');
                                        var htmlli2 =

                                            `
                                                <li class="system_code" value="`+ colJavaName + `">` + strArray[0] + `&nbsp;*</li>
                                                `;
                                    } else {
                                        var htmlli2 =
                                            `
                                                <li value="`+ colJavaName + `">` + colJavaName + `</li>
                                                `;

                                    }


                                    htmlmiddle += htmlli2;
                                };
                            };


                            var htmltail =
                                `
                                                            </ul>
                                                            <a class="visivi"  > 더보기 ▼ </a>
                                                            <a class="closed"  > 접기 ▲ </a>
                                                        </li>


                                                    </ul>
                                                </div>
                                            </td>
                                                            
                                                            
                            `;
                            var td = htmlhead + htmlmiddle + htmltail;

                            tds += td;
                        };

                        var htmlTableTail =
                            `
                                </tr>
                            <br/>	
                            <br/>
                            </table>	

                        `

                        var htmltable1 = htmlTableHead + tds + htmlTableTail;

                        tables += htmltable1;
                    };

                    if (gubunJa == 'industry') {
                        document.getElementById('result_area_industry').innerHTML = categoryMark + expend_all + tables;
                    } else {
                        document.getElementById('result_area_subsidiary').innerHTML = expend_all + tables;
                    }


                    $(".menu>a").click(function () {

                        //$('directoryresults').find('input');
                        var lisf = $(this).siblings('ul');
                        var submenu = $(lisf[1]);
                        var lista = $(this).siblings('a');
                        var folda1 = $(lista[0]);
                        var folda2 = $(lista[1]);

                        if (submenu.is(":visible")) {
                            submenu.slideUp(400);

                            if ($(this).hasClass('closed')) {
                                $(this).css('visibility', 'hidden');
                            }
                            if (folda1.hasClass('closed')) {
                                folda1.css('visibility', 'hidden');
                            }
                            if (folda2.hasClass('closed')) {
                                folda2.css('visibility', 'hidden');
                            }
                            if ($(this).hasClass('visivi')) {
                                $(this).css('visibility', 'visible');
                            }
                            if (folda1.hasClass('visivi')) {
                                folda1.css('visibility', 'visible');
                            }
                            if (folda2.hasClass('visivi')) {
                                folda2.css('visibility', 'visible');
                            }

                        } else {
                            submenu.slideDown(400);

                            if ($(this).hasClass('closed')) {
                                $(this).css('visibility', 'visible');
                            }
                            if (folda1.hasClass('closed')) {
                                folda1.css('visibility', 'visible');
                            }
                            if (folda2.hasClass('closed')) {
                                folda2.css('visibility', 'visible');
                            }
                            if ($(this).hasClass('visivi')) {
                                $(this).css('visibility', 'hidden');
                            }
                            if (folda1.hasClass('visivi')) {
                                folda1.css('visibility', 'hidden');
                            }
                            if (folda2.hasClass('visivi')) {
                                folda2.css('visibility', 'hidden');
                            }

                        }
                        //console.log("im aclick in list");

                    });

                    $(".list").on("click", "li", function () {
                        // alert($(this).attr("value"));
                        var listName = $(this).attr("value");

                        getNewsListByIndustryAndSubsidiary(gubunJa, listName);
                    });

                    $(".hide").on("click", "li", function () {
                        // alert($(this).attr("value"));
                        var listName = $(this).attr("value");
                        getNewsListByIndustryAndSubsidiary(gubunJa, listName);
                    });

                },
                error: function () {
                    alert('조회 실패');
                }
            });

        }


        function rmv() {
            $(".hide").slideUp();
            $(".closed").css('visibility', 'hidden');
            $(".visivi").css('visibility', 'visible');
            $("#toggleee").text('전체 펼치기');

        }

        function sshow() {
            $(".hide").slideDown();
            $(".closed").css('visibility', 'visible');
            $(".visivi").css('visibility', 'hidden');
            $("#toggleee").text('전체 접기');
        }

        function togglee() {
            if ($("#toggleee").text() == '전체 펼치기') {
                sshow();
            } else if ($("#toggleee").text() == '전체 접기') {
                rmv();
            };
        }

        function dataTableSearch(keyword) {
            //$("#dataTableSearch").val('엘지');
            //$("#dataTableSearch").focus();
            //$("#dataTableSearch").bind("keydown", function(e) {
            //    if (e.keyCode == 13) { // enter key
            //       // yourAction();
            //        return false
            //	}
            //});

            //$("#dataTableSearch").trigger(e);

            var selectItem = $("#fold").val();

            if (selectItem == "company") {
                $("#dataTableSearchCompany").val(keyword);
            }
            else if (selectItem == "subsidiary") {
                $("#dataTableSearchSubsidiary").val(keyword);
            }
            else if (selectItem == "industry") {
                $("#dataTableSearchIndustry").val(keyword);
            }
            else if (selectItem == "keyword") {
                $("#dataTableSearchKeyword").val(keyword);
            }

            //$("#search_company").trigger(e);

            pressButton();
        }

        function pressButton() {
            var e = jQuery.Event("keyup.DT");
            //var e = jQuery.Event( "search.DT", { keyCode: 13 } )



            var selectItem = $("#fold").val();

            if (selectItem == "company") {
                $("#dataTableSearchCompany").trigger(e);
            }
            else if (selectItem == "subsidiary") {
                $("#dataTableSearchSubsidiary").trigger(e);
            }
            else if (selectItem == "industry") {
                $("#dataTableSearchIndustry").trigger(e);
            }
            else if (selectItem == "keyword") {
                $("#dataTableSearchKeyword").trigger(e);
            }

            //setTimeout(function () {
            //	jQuery('#search_company').trigger('click');
            // }, 1000);
            //console.log('im trigger press enter')
        }


        //기업별 뉴스 가져오기
        function getCompanyListByCompany() {
            var companyName = document.getElementById('search_company_news').value;
            //console.log("@#@#@#@#@#@#");
            //console.log('기업명 ' + companyName);
            var result_area = 'result_area_news';
            var table_id = 'example_news';
            $.ajax({
                url: "/getCompanyListByCompany/" + companyName,
                method: 'GET',
                dataType: 'json',
                success: function (responseData) {
                    //alert('조회 성공');
                    //console.log(responseData.length);

                    if (responseData.length == 0) {
                        var modalContents =
                            `
                            <div class="modal-list-head">
                                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 16pt;">관련 기업이 존재하지 않습니다.</span></b></span></p>
                            </div>

                            <div class="modal-list">
                                <p style="text-align: center; line-height: 1.5;"><br />
                                    데이터가 존재하지 않습니다.
                                </p>
                            </div>
                        `;
                    }
                    else {
                        window.companyResponseData = responseData;

                        $('#myModal').hide();

                        var modalContents =
                            `
                            <div class="modal-list-head">
                                <p style="text-align: center;"><span style="font-size: 14pt;"><b><span style="font-size: 16pt;">목록 중 하나를 선택해 주세요.</span></b></span></p>
                            </div>

                            <div class="modal-list">
                                
                                <p style="text-align: left; margin-left: 5%; margin-top: -2%; font-style: italic; font-size: 13px; color: #666666;">＊계열 또는 산업을 선택하시면 해당 기업을 포함한 계열뉴스 또는 산업뉴스 분석 결과가 표시됩니다.</p>
                                <br>
                                
                                <table style="border-color:#ccc4c3; margin-left:auto; margin-right:auto; margin-top: -2%;" width="90%" rules=cols>
                                    <tr>
                                        <th class="th_list">기업</th>
                                        <th class="th_list" width: 20%;">계열</th>
                                        <th class="th_list">산업</th>
                                    </tr>                                        
                                    
                            `;
                        
                        var tl = `<p style="text-align: left; margin-left: -4%; margin-top: -4%; font-style: italic; font-size: 10px;">＊계열 또는 산업을 선택하시면 해당 기업을 포함한 계열뉴스 또는 산업뉴스 분석 결과가 표시됩니다.</p>`;
                        var tr = `<p style="text-align: right; margin-right: -4%; margin-top: -4%; font-style: italic; font-size: 10px;">＊계열 또는 산업을 선택하시면 해당 기업을 포함한 계열뉴스 또는 산업뉴스 분석 결과가 표시됩니다.</p>`;
                        var bl = `<p style="text-align: left; margin-left: 5%; margin-top: -2%; font-style: italic; font-size: 10px;">＊계열 또는 산업을 선택하시면 해당 기업을 포함한 계열뉴스 또는 산업뉴스 분석 결과가 표시됩니다.</p>`;
                        var br = `<p style="text-align: right; margin-right: 5%; margin-top: -2%; font-style: italic; font-size: 10px;">＊계열 또는 산업을 선택하시면 해당 기업을 포함한 계열뉴스 또는 산업뉴스 분석 결과가 표시됩니다.</p>`;

                        var modalContentsBody = ``;
                        for (let i = 0; i < responseData.length; i++) {
                            let subsTempHTML = ``;
                            let indsTempHTML = ``;

                            if (window.companyResponseData[i].subsName == null || window.companyResponseData[i].subsName == 'NaN') {
                                subsTempHTML = `<td class="disabled">　</td>`;
                            }
                            else {
                                subsTempHTML = `<td class="td_subs">` + window.companyResponseData[i].subsName + `</td>`;
                            }
                            if (window.companyResponseData[i].instName == null) {
                                indsTempHTML = `<td class="disabled">　</td>`;
                            }
                            else {
                                indsTempHTML = `<td class="td_inds">` + window.companyResponseData[i].instName + `</td>`;
                            }

                            modalContentsBody += `<tr class = "comp_td"><td class="td_comp">` + window.companyResponseData[i].cmpy + '</td>'
                                + subsTempHTML
                                + indsTempHTML
                        }

                        var modalContentsTail =
                            `            
                                    </table>
                                    
                                </div>
                            `;

                        modalContents = modalContents + modalContentsBody;
                        modalContents = modalContents + modalContentsTail;
                    }

                    document.getElementById('myModal').innerHTML = modalContents;
                    $('#myModal').show();

                    $(".td_comp").on("click", function () {
                        var companyName = $(this).text();
                        window.companyName = companyName

                        // getNewsListByCompanyName(companyName);
                        getRowCount();
                    });

                    $(".td_subs").on("click", function () {
                        var companyName = $(this).text();
                        $('#fold').val('subsidiary').prop('selected', true);
                        getNewsListByIndustryAndSubsidiary('subsidiary', companyName);
                    });

                    $(".td_inds").on("click", function () {
                        var companyName = $(this).text();
                        $('#fold').val('industry').prop('selected', true);
                        getNewsListByIndustryAndSubsidiary('industry', companyName);
                    });

                },
                error: function () {
                    alert('조회 실패');
                    $('#myModal').hide();
                }
            });
        }

        //산업별 뉴스 가져오기
        function getNewsListByIndustry(industryName) {

            //console.log('산업명' + industryName);
            loading1("뉴스");
            var result_area = 'result_area_news';
            var table_id = 'industry_news_list';
            $.ajax({
                url: "/getNewsListByIndustry/" + industryName,
                method: 'GET',
                dataType: 'json',
                success: function (responseData) {
                    //alert('조회 성공');
                    //console.log(responseData.length);
                    window.newsResponseData = responseData;
                    //console.log(window.newsResponseData[0]);

                    $('#myModal').hide();

                    document.getElementById('myModal').innerHTML = modalhtml2;
                    $('#myModal').show();
                    setTimeout(() => drawTable(result_area, table_id), 1000);
                    $('#gaugeExp').css("visibility","visible");
                    document.getElementById('main_title').innerHTML = `뉴스 목록 조회<h4 style="display:inline">(` + industryName + `)</h4>`;

                },
                error: function () {
                    alert('조회 실패');
                    $('#myModal').hide();
                }
            });
        }


        function itemChangeFold() {
            var selectItem = $("#fold").val();
            //console.log(selectItem);
            var getFunction = ``;
            var gubunSelectHTML = ` <a style="margin-right: -10px; margin-left: 10px;">구분</a>
                                    <select name="gubun" id="gubunNews" class="select" style="width:120px;" onChange="itemChangeNews()">
                                        <option value="year" selected="selected">연도별</option>
                                        <option value="quarter">분기별</option>
                                        <option value="month">월별</option>
                                        <option value="custom">사용자 선택</option>
                                    </select>
                                    `;
            var yearSelectHTML = `  
                                        <a style="margin-right: -10px; margin-left: 10px;">연도 선택</a>
                                        <select name="newsYear" id="newsYear" class="select" style="min-width: 80px; width:80px;">
                                            <option value="2025">2025</option>
                                            <option value="2024">2024</option>
                                            <option value="2023">2023</option>
                                            <option value="2022">2022</option>
                                            <option value="2021">2021</option>
                                            <option value="2020" selected="selected">2020</option>
                                            <option value="2019">2019</option>
                                            <option value="2018">2018</option>
                                            <option value="2017">2017</option>
                                            <option value="2016">2016</option>
                                            <option value="2015">2015</option>
                                        </select>
                                    `;
            var conditionHTML = `   
                                        <a id="gubunText"></a>
                                        <select name="choices" id="choicesNews" class="select">
                                        </select>
                                    `;
            var datePickerHTML = `  
                                        <span class="date_picker">
                                            <label for="date_from" class="label" style="margin-right: -1px; margin-left: 10px;">기간</label>
                                            <span class="input_date"><input type="text" class="input_text" id="date_from_news"></span>
                                            <span class="dash">-</span>
                                            <span class="input_date"><input type="text" class="input_text" id="date_to_news"></span>
                                        </span>
                                    `;
            var searchBoxHTML = `<input id="search_company_news" type="text" placeholder="검색" value="" onkeypress="if( event.keyCode == 13 ){` + getFunction + `}">
                <button id="search_button_news" class="btn_search" onclick="` + getFunction + `"><span class="blind" >검색</span></button>`;
            document.getElementById('search_box_news').innerHTML = searchBoxHTML;


            var companyChartSelect = `<option value="stock">주가</option>
                                    <option value="credit">신용공여</option>
                                    <option value="sales">매출액</option>
                                    <option value="grade">재무위험등급</option>
                                    <option value="sinyong">신용평가등급</option>`;
            var elseChartSelect = `<option value="stock">주가</option>
                                    <option value="credit">신용공여</option>
                                    <option value="sales">매출액</option>
                                    <option value="grade">재무위험등급</option>`;

            document.getElementById('gubunSelect').innerHTML = gubunSelectHTML;
            document.getElementById('yearSelect').innerHTML = yearSelectHTML;
            document.getElementById('condition').innerHTML = conditionHTML;

            itemChangeNews();
            $('#resetContentButton').hide();
            document.getElementById('main_title').innerText = '뉴스 조회';

            if (selectItem == "company") {
                // createEmptyDatatableNews();
                $('#chartDiv').show();
                $('#result_area_subsidiary').hide();
                $('#result_area_industry').hide();
                $('#result_area_news').show();
                $('#yearSelect').show();
                $('#gubunSelect').show();
                $('#search_box_news').show();
                document.getElementById("search_company_news").disabled = false;
                document.getElementById("search_button_news").disabled = false;
                document.getElementById('search_company_news').value = '';
                //$('#result_area_news').show();
                getFunction = `getCompanyListByCompany();`;
            }
            else if (selectItem == "subsidiary") {
                getIndustryAndSubsidiaryList('subsidiary');
                $('#result_area_subsidiary').show();
                $('#result_area_industry').hide();
                $('#result_area_news').hide();
                $('#yearSelect').show();
                $('#gubunSelect').show();
                $('#search_box_news').hide();
                document.getElementById("search_company_news").disabled = true;
                document.getElementById("search_button_news").disabled = true;
                document.getElementById('search_company_news').value = '';
                $('#chartDiv').hide();
            }
            else if (selectItem == "industry") {
                getIndustryAndSubsidiaryList('industry');
                $('#result_area_industry').show();
                $('#result_area_subsidiary').hide();
                $('#result_area_news').hide();
                $('#yearSelect').show();
                $('#gubunSelect').show();
                $('#search_box_news').hide();
                document.getElementById("search_company_news").disabled = true;
                document.getElementById("search_button_news").disabled = true;
                document.getElementById('search_company_news').value = '';
                $('#chartDiv').hide();
            }
            else if (selectItem == "keyword") {
                // createEmptyDatatableNews();
                $('#chartDiv').show();
                $('#result_area_subsidiary').hide();
                $('#result_area_industry').hide();
                $('#result_area_news').show();
                $('#yearSelect').show();
                $('#gubunSelect').show();
                $('#search_box_news').show();
                document.getElementById("search_company_news").disabled = false;
                document.getElementById("search_button_news").disabled = false;
                document.getElementById('search_company_news').value = '';
                //$('#result_area_news').show();
                getFunction = `getRowCount();`;
            }

            searchBoxHTML = `<input id="search_company_news" type="text" placeholder="검색" value="" onkeypress="if( event.keyCode == 13 ){` + getFunction + `}">
                <button id="search_button_news" class="btn_search" onclick="` + getFunction + `"><span class="blind" >검색</span></button>`;
            document.getElementById('search_box_news').innerHTML = searchBoxHTML;
            document.getElementById('pagination-container').innerHTML = ``;
        }

        function itemChangeFoldChart() {
            var selectItem = $("#chartFold").val();
            //console.log(selectItem)
            var divID = 'stockTime'


            if (selectItem == "stock") {
                $('#stockRange').show();
                makeStockBarGraph(window.newsChartData.allStockData, divID);
            }
            else if (selectItem == "credit") {
                $('#stockRange').hide();

                makeLineGraph(window.newsChartData.creditData, divID)
            }
            else if (selectItem == "sales") {
                $('#stockRange').hide();
                makeLineGraph(window.newsChartData.salesData, divID)
            }
            else if (selectItem == "grade") {
                $('#stockRange').hide();
                makeLineGraph(window.newsChartData.gradeData, divID)
            }
            else if (selectItem == "grade2") {
                $('#stockRange').hide();
                makeLineGraph(window.newsChartData.grade2Data, divID)
            }
            else if (selectItem == "sinyong") {
                $('#stockRange').hide();
            }

        }

        function createEmptyChartDiv() {
            document.getElementById('chartDiv').innerHTML = chartDivHTML;
        }

        function createEmptyDatatableNews() {
            var newsTableBody = ``;

            for (var i = 0; i < 10; i++) {
                newsTableBody = newsTableBody + `<tr> <td>　 </td><td></td><td></td><td></td><td></td><td></td> </tr>`;
            }

            var newsTable = ` <table id="example_news" class="display" style="width:100%">
                                <colgroup>
                                    <col>
                                </colgroup>
                                <thead>
                                <tr>
                                    <th>인덱스</th>

                                    <th>날짜</th>
                                    <th>기업명</th>
                                    <th>제목</th>
                                    <th>progress</th>
                                    <th>score</th>
                                </tr>
                                </thead>
                                <tbody id="tbodyNews">
                                    ` + newsTableBody + `                                
                                </tbody>
                            </table>`;

            document.getElementById('result_area_news').innerHTML = newsTable;
            $('#example_news').DataTable();
        }

        function createEmptyDatatableReport() {
            var reportTableBody = ``;

            for (var i = 0; i < 10; i++) {
                reportTableBody = reportTableBody + `<tr> <td>　 </td><td></td><td></td><td></td><td></td><td></td> </tr>`;
            }

            var reportTable = ` <table id="example_report" class="display" style="width:100%">
                                <colgroup>
                                    <col>
                                </colgroup>
                                <thead>
                                <tr>
                                    <th>인덱스</th>
                                    <th>날짜</th>
                                    <th>제목</th>
                                    <th >스코어</th>
                                    <th >분류</th>
                                    <th >타입</th>
                                </tr>
                                </thead>
                                <tbody id="tbodyReport">
                                    ` + reportTableBody + `                                
                                </tbody>
                            </table>`;

            document.getElementById('result_area_report').innerHTML = reportTable;
            $('#example_report').DataTable();
        }

        //window.onscroll = function() {scrollFunction()


        function scrollFunction() {
            //var scrollBottom = $(document).height() - $(window).height() - $(window).scrollTop();
            // //console.log('im scroll $(document).height() =  ' + $(document).height());
            // //console.log('im scroll $(window).height() =  ' + $(window).height());
            // //console.log('im scroll $(window).scrollTop() =  ' + $(window).scrollTop());
            var mybutton = document.getElementById("myBtn");
            var mybutton2 = document.getElementById("myBtn2");

            var bott = document.getElementById("scroll_button").scrollHeight;
            var bott2 = document.getElementById("scroll_button").scrollTop;
            // //console.log('im document.body.scrollHeight= ' + document.getElementById("scroll_button").scrollHeight);
            // //console.log(document.getElementById("scroll_button").scrollTop);
            ////console.log('document.body.scrollTop=  ' + document.body.scrollTop)
            ////console.log('document.documentElement.scrollTop=  ' + document.documentElement.scrollTop)

            if (((document.getElementById("scroll_button").scrollHeight - $(window).height()) >= document.getElementById("scroll_button").scrollTop) && (document.getElementById("scroll_button").scrollTop > 20)) {
                mybutton.style.display = "block";
                mybutton.style.bottom = "70px";
                mybutton2.style.display = "block";
            } else if (document.getElementById("scroll_button").scrollTop > (document.getElementById("scroll_button").scrollHeight - $(window).height())) {
                mybutton.style.display = "block";
                mybutton.style.bottom = "20px";
                mybutton2.style.display = "none";
            } else {
                mybutton.style.display = "none";
                mybutton.style.bottom = "70px";
                mybutton2.style.display = "none";
            }

            if (document.getElementById("scroll_button").scrollTop == 0) {
                mybutton.style.display = "none";
                mybutton.style.bottom = "70px";
                mybutton2.style.display = "none";
            }

        }

        // When the user clicks on the button, scroll to the top of the document
        function topFunction() {
            document.getElementById("scroll_button").scrollTop = 0;

        }

        function BotFunction() {

            document.getElementById("scroll_button").scrollTop = document.getElementById("scroll_button").scrollHeight;
        }


    </script>

    <script type="text/javascript" src="./js/d3.v4.min.js"></script>
    <script type="text/javascript" src='./js/nlp.js'></script>
    <script type="text/javascript" src='./js/nlp2.js'></script>
    <script type="text/javascript" src='./js/FileSaver.min.js'></script>
    <script type="text/javascript" src="./js/d3.layout.cloud.js"></script>




</head>

<body>
    <div class="wrap">
        <header class="header">
            <!-- logo -->
            <h1 class="logo_area">
                <a href="/" class="link_logo"><img src="img/logo_KDB.jpg" alt="algograp"></a>
            </h1>

            <div class="right_area">
                <!-- user -->
                <div class="buttons">
                    <button class="btn_shortcut"><span class="blind">바로가기</span></button>

                </div>
            </div>
        </header>
        <div class="layer_dimmed">
            <div class="layer_box" id='entirePopupBox'>
                <div class="layer_body">
                    <div class="chart_detail">
                        <div style="height: 25px; position: relative; top: -40px">
                            <p style="text-align: center; font-size: 25px; font-weight: bold;" id=paramName></p>
                        </div>
                        <!-- <div id="resetDiv">
                            <p style="text-align: left;">
                                <button style="position:relative; left:0; top:-10px;" type="button" class="btn point"
                                    id='resetChart'>Reset</button>
                            </p>
                        </div> -->
                        <div id="resetDiv" style="height: 1px;">
                            <button style="position:relative; left:0; top:-40px;" type="button" class="btn point"
                                id='resetChart'>Reset</button>
                        </div>
                        <div id='wordCloudSettings' class='enlargedChartSettings' style='display:none'>
                            <span>패딩 선택: </span>
                            <span id='paddingValue'></span>
                            <input id="paddingSlider" type="range" min="1" max="4" step="0.25" value="1">
                            <span>키워드 개수: </span>
                            <span id='textMaxValue'></span>
                            <input id="textNumberSlider" type="range" min="1" max="300" step="1" value="50">
                            <span>글자 크기: </span>
                            <span id='fontSizeValue'></span>
                            <input id="fontSizeSlider" type="range" min="1" max="100" step="1" value="27">
                        </div>
                        <div id='keywordBarSettings' class='enlargedChartSettings' style='display:none'>
                            <span>숫자 선택: </span>
                            <input id="keywordBarSlider" type="range" min="1" max="50" step="1" value="10">
                            <span id='keywordMaxValueBar'></span>
                        </div>
                        <div id='keywordPieSettings' class='enlargedChartSettings' style='display:none'>
                            <span>숫자 선택: </span>
                            <input id="keywordPieSlider" type="range" min="1" max="30" step="1" value="6">
                            <span id='keywordMaxValuePie'></span>
                            <br>
                            <span>숫자 선택: </span>
                            <input id="keywordPieSlider2" type="range" min="1" max="100000" step="1" value="300">
                            <span id='keywordMaxValuePie2'></span>
                        </div>
                        <a id='downloadButton' class="btn point" target="_blank">다운로드</a>
                        <div class="chart_area" id="enlargedChart">
                            <div class="chart">차트 영역</div>
                        </div>
                    </div>
                </div>
                <button class="btn_close"><span class="blind">닫기</span></button>
            </div>
        </div>
        <div class="container">

            <div class="side_panel">
                <h2 class="blind">메뉴</h2>
                <!-- menu -->
                <nav class="main_menu is_fold">
                    <ul class="menu_list">
                        <li><a href="#" class="link_menu active"><i class="icon_01"></i><span class="menu">데이터
                                    관리</span></a></li>
                        <li><a href="#" class="link_menu"><i class="icon_02"></i><span class="menu">데이터 전처리</span></a>
                        </li>
                        <li><a href="#" class="link_menu"><i class="icon_03"></i><span class="menu">데이터 분리</span></a>
                        </li>
                        <li><a href="#" class="link_menu"><i class="icon_04"></i><span class="menu">데이터 분석</span></a>
                        </li>
                        <li><a href="#" class="link_menu"><i class="icon_05"></i><span class="menu">분석 결과</span></a>
                        </li>
                        <li><a href="#" class="link_menu"><i class="icon_06"></i><span class="menu">데이터 진단</span></a>
                        </li>

                    </ul>



                    <button class="btn_close"><span class="blind">메인메뉴 닫기</span></button>
                </nav>


            </div>


            <div class="main_panel" role="main">


                <div class="contents_panel" id="scroll_button">
                    <button onclick="topFunction()" id="myBtn" title="Go to top">⮝</button>
                    <button onclick="BotFunction()" id="myBtn2" title="Go to bottom">⮟</button>
                    <h3 class="main_title" id="main_title"></h3>

                    <span class="input_radio">
                        <input type="radio" class="input_radio" id="news_radio" name="news_report"
                            onchange="setDisplay()" checked="checked">
                        <label for="news_radio" class="label">뉴스</label>

                    </span>
                    <span class="input_radio">
                        <input type="radio" class="input_radio" id="report_radio" name="news_report"
                            onchange="setDisplay()">
                        <label for="report_radio" class="label">보고서</label>
                    </span>

                    <div class="contents">

                        <div class="option_set" id="option_set_news">

                            <div class="data_set">
                                <select class="select" id="fold" style="min-width: 90px; width:90px;"
                                    onChange="itemChangeFold()">
                                    <option value="company">기업별</option>
                                    <option value="subsidiary">계열별</option>
                                    <option value="industry">산업별</option>
                                    <option value="keyword">키워드</option>
                                </select>
                            </div>

                            <div class="data_set" style="float:left" id="gubunSelect">
                                <a style="margin-right: -10px; margin-left: 10px;">구분</a>
                                <select name="gubun" id="gubunNews" class="select" style="width:120px;"
                                    onChange="itemChangeNews()">
                                    <option value="year" selected="selected">연도별</option>
                                    <option value="quarter">분기별</option>
                                    <option value="month">월별</option>
                                    <option value="custom">사용자 선택</option>
                                </select>
                            </div>

                            <div class="data_set" style="float:left" id="yearSelect">
                                <a style="margin-right: -10px; margin-left: 10px;">연도 선택</a>
                                <select name="newsYear" id="newsYear" class="select"
                                    style="min-width: 80px; width:80px;">
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                    <option value="2020" selected="selected">2020</option>
                                    <option value="2019">2019</option>
                                    <option value="2018">2018</option>
                                    <option value="2017">2017</option>
                                    <option value="2016">2016</option>
                                    <option value="2015">2015</option>
                                </select>
                            </div>

                            <div id="condition" class="data_set" style="float:left">
                                <a id="gubunText"></a>
                                <select name="choices" id="choicesNews" class="select">
                                </select>
                            </div>

                            <div id="date_picker_div_News">
                                <span class="date_picker">
                                    <label for="date_from" class="label"
                                        style="margin-right: -1px; margin-left: 10px;">기간</label>
                                    <span class="input_date"><input type="text" class="input_text"
                                            id="date_from_news"></span>
                                    <span class="dash">-</span>
                                    <span class="input_date"><input type="text" class="input_text"
                                            id="date_to_news"></span>
                                </span>
                            </div>


                            <div class="search_box" id="search_box_news">
                                <input id="search_company_news" type="text" placeholder="검색" value=""
                                    onkeypress="if( event.keyCode == 13 ){getCompanyListByCompany();}">
                                <button id="search_button_news" class="btn_search"
                                    onclick="getCompanyListByCompany();"><span class="blind">검색</span></button>
                            </div>

                            <div id="resetContentButton">
                                <button class="btn point" onclick="itemChangeFold();" style="color:#fefefe;">목록으로
                                    돌아가기</button>
                            </div>

                        </div>


                        <div class="option_set" id="option_set_report">

                            <div class="data_set" style="float:left">
                                <a style="margin-right: -10px; margin-left: 10px;">구분</a>
                                <select name="gubun" id="gubunReport" class="select" onChange="itemChangeReport()">
                                    <option value="year" selected="selected">연도별</option>
                                    <option value="quarter">분기별</option>
                                    <option value="month">월별</option>
                                    <option value="custom">사용자 선택</option>
                                </select>
                            </div>

                            <div class="data_set" style="float:left;" id="yearSelectReport">
                                <a style="margin-right: -10px; margin-left: 10px;">연도 선택</a>
                                <select name="reportYear" id="reportYear" class="select"
                                    style="min-width: 80px; width:80px;">
                                    <option value="2025">2025</option>
                                    <option value="2024">2024</option>
                                    <option value="2023">2023</option>
                                    <option value="2022">2022</option>
                                    <option value="2021">2021</option>
                                    <option value="2020" selected="selected">2020</option>
                                    <option value="2019">2019</option>
                                    <option value="2018">2018</option>
                                    <option value="2017">2017</option>
                                    <option value="2016">2016</option>
                                    <option value="2015">2015</option>
                                </select>
                            </div>

                            <div id="condition_report" class="data_set" style="float:left">
                                <a id="gubunText"></a>
                                <select name="choices" id="choicesReport" class="select">
                                </select>
                            </div>


                            <div id="date_picker_div_Report">
                                <span class="date_picker">
                                    <label for="date_from" class="label">기간</label>
                                    <span class="input_date"><input type="text" class="input_text"
                                            id="date_from_report"></span>
                                    <span class="dash">-</span>
                                    <span class="input_date"><input type="text" class="input_text"
                                            id="date_to_report"></span>
                                </span>
                            </div>

                            <div class="search_box" id="search_box_report">
                                <input id="search_company_report" type="text" placeholder="검색" value=""
                                    onkeypress="if( event.keyCode == 13 ){getReportList();}">
                                <button class="btn_search" onclick="getReportList();"><span
                                        class="blind">검색</span></button>
                            </div>

                        </div>


                        <div id='chartDiv' style='display:block'>

                            <div class="contents">

                                <div class="visualize">

                                    <div class="card_list">
                                        <!-- DANGER GAUGE Extended Version -->
                                        <div class="card_item_small">
                                            <div class="card_box_left">
                                                <div class="card_head">
                                                    뉴스 감성분석 결과

                                                    <style>
                                                        #data {
                                                            overflow: hidden;
                                                            padding: 0;
                                                        }

                                                        #articleCo {
                                                            visibility: hidden;
                                                            padding: 0;
                                                            padding-left: 1px;
                                                            border: none;
                                                            background-color: #eee;
                                                        }

                                                        .hiddenoption {
                                                            visibility: hidden;
                                                            border: 1px solid #000;
                                                            background-color: white;
                                                            padding-left: 5px;
                                                            padding-right: 5px;
                                                            margin-left: -1px;

                                                        }
                                                    </style>

                                                    <select multiple size="1" id='articleCo' class='yearSelect'>

                                                        <option class='hiddenoption' value='all' selected>전체</option>
                                                    </select>
                                                    <span style="float: right;" id="maximizeGaugeSpan"><i
                                                            class="maximize"
                                                            id="maximizeGauge"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>
                                                </div>
                                                <div class="chart_area" style=" height: 16vw;">
                                                    <div class="chart" id="dangerGauge">

                                                        <script type="text/javascript" src='./js/nlp.js'></script>

                                                        <script>
                                                            var gauge = document.getElementById('dangerGauge');

                                                            var gaugeDirection = 0;

                                                        </script>

                                                    </div>

                                                </div>

                                                <div id="gaugeExp">
                                                    <p style ="font-size:0.5em;">검색 기간 뉴스데이터를 AI가 분석하여 긍정/중립/부정으로 정량화한</p>
                                                    <p style ="font-size:0.5em;">수치,  낮을 수록 위험도가 높다</p>
                                                </div>

                                            </div>
                                        </div>

                                        <!-- news article count -->
                                        <div class="card_item_large">
                                            <div class="card_box_right">
                                                <div class="card_head">
                                                    <span style="vertical-align: middle;" class="title">감성지수 Ⅰ</span>
                                                    <style>
                                                        #data {
                                                            overflow: hidden;
                                                            padding: 0;
                                                        }

                                                        .yearSelect {
                                                            padding: 0;
                                                            padding-left: 1px;
                                                            border: none;
                                                            background-color: #ffffff;
                                                        }

                                                        .yearSelect option {
                                                            display: inline-block;
                                                            border: 1px solid #CDCDCD;
                                                            background-color: white;
                                                            padding-top: 2px;
                                                            padding-bottom: 2px;
                                                            padding-left: 5px;
                                                            padding-right: 5px;
                                                            margin-left: 0px;
                                                        }

                                                        .yearSelect::-webkit-scrollbar {
                                                            display: none;
                                                        }
                                                    </style>

                                                    <select multiple size="1" id='articleCo' class='yearSelect'>

                                                        <option class='hiddenoption' value='all' selected>전체</option>
                                                    </select>
                                                    <span style="float: right;" id="maximizeCombinedSpan"><i
                                                            class="maximize"
                                                            id="maximizeCombined"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>
                                                </div>
                                                <div class="chart_area" style=" height: 16vw;">
                                                    <div class="chart" id='articleCounts'>
                                                        <script>
                                                            var divID = 'articleCounts';


                                                        </script>
                                                    </div>
                                                </div>
                                                <p style ="font-size:0.5em;">　</p>
                                                <p style ="font-size:0.5em;">　</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card_list">
                                        <!-- WORD CLOUD -->
                                        <div class="card_item_small">
                                            <div class="card_box_left">
                                                <div class="card_head">
                                                    Word Cloud

                                                    <style>
                                                        #data {
                                                            overflow: hidden;
                                                            padding: 0;
                                                        }

                                                        #articleCo {
                                                            visibility: hidden;
                                                            padding: 0;
                                                            padding-left: 1px;
                                                            border: none;
                                                            background-color: #eee;
                                                        }

                                                        .hiddenoption {
                                                            visibility: hidden;
                                                            border: 1px solid #000;
                                                            background-color: white;
                                                            padding-left: 5px;
                                                            padding-right: 5px;
                                                            margin-left: -1px;

                                                        }
                                                    </style>

                                                    <select multiple size="1" id='articleCo' class='yearSelect'>

                                                        <option class='hiddenoption' value='all' selected>전체</option>
                                                    </select>
                                                    <span style="float: right;" id="maximizeWordCloudSpan"><i
                                                            class="maximize"
                                                            id="maximizeWordCloud"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>
                                                </div>
                                                <div class="chart_area" style=" height: 16vw;">
                                                    <div class="chart" id="wordCloud" style="cursor:default">

                                                        <script type="text/javascript" src='./js/nlp.js'></script>

                                                        <script>
                                                            var gauge = document.getElementById('wordCloud');


                                                        </script>

                                                    </div>

                                                </div>



                                            </div>
                                        </div>

                                        <!-- SENTIMENT BOX -->
                                        <div class="card_item_large">
                                            <div class="card_box_right">
                                                <div class="card_head">
                                                    <span style="vertical-align: middle;" class="title">감성지수 Ⅱ</span>
                                                    <style>
                                                        #data {
                                                            overflow: hidden;
                                                            padding: 0;
                                                        }

                                                        .yearSelect {
                                                            padding: 0;
                                                            padding-left: 1px;
                                                            border: none;
                                                            background-color: #ffffff;
                                                        }

                                                        .yearSelect option {
                                                            display: inline-block;
                                                            border: 1px solid #CDCDCD;
                                                            background-color: white;
                                                            padding-top: 2px;
                                                            padding-bottom: 2px;
                                                            padding-left: 5px;
                                                            padding-right: 5px;
                                                            margin-left: 0px;
                                                        }

                                                        .yearSelect::-webkit-scrollbar {
                                                            display: none;
                                                        }
                                                    </style>

                                                    <select multiple size="1" id='articleCo' class='yearSelect'>

                                                        <option class='hiddenoption' value='all' selected>전체</option>
                                                    </select>
                                                    <span style="float: right;" id="maximizeSentimentBoxSpan"><i
                                                            class="maximize"
                                                            id="maximizeSentimentBox"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>
                                                </div>
                                                <div class="chart_area" style=" height: 16vw;">
                                                    <div class="chart" id='sentimentBoxPlot'>
                                                        <script>
                                                            var divID = 'sentimentBoxPlot';


                                                        </script>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card_list">
                                        <!-- 키워드 빠 플롯 -->
                                        <div class="card_item_small">
                                            <div class="card_box_left">
                                                <div class="card_head">
                                                    <span style="vertical-align: middle;" class="title">키워드 랭킹</span>
                                                    <style>
                                                        #stockRangeee {
                                                            visibility: hidden;

                                                        }
                                                    </style>

                                                    <select size="1" id='stockRangeee' class='select'>
                                                    </select>
                                                    <span style="float: right;" id="maximizeKeywordBarSpan"><i
                                                            class="maximize"
                                                            id="maximizeKeywordBar"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>
                                                </div>
                                                <div class="card_content">
                                                    <div class="chart_area" style=" height: 15.5vw;">
                                                        <div class="chart" id="keywordBar">
                                                            <script>

                                                            </script>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <!-- 주가 플롯 -->
                                        <div class="card_item_large">
                                            <div class="card_box_right">
                                                <!-- <div class="card_head">
                                                    <span>dd</span>
                                                    <select class="select" id="chartFold" style="min-width: 90px; width:90px; float:left"
                                                        onChange="itemChangeFoldChart()">
                                                        <option value="stock">주가</option>
                                                        <option value="credit">신용</option>
                                                        <option value="sales">매출액</option>
                                                    </select>
                                                    <span style="float: right;" id="maximizeStockSpan"><i
                                                        class="maximize"
                                                        id="maximizeStock"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i>
                                                    </span>
                                

                                                    <div class="data_set_chart" id="chartStock" style="float :left">
                                                        <a style="margin-right: 5px; margin-left: 10px;">회사</a>
                                                        <select size="1" id='stockRange' class='select'>
                                                        </select>
                                                    </div>
 
                                                </div> -->

                                                <div class="card_head">
                                                    <select size="1" class="select" id="chartFold"
                                                        style="min-width: 90px; width:140px;"
                                                        onChange="itemChangeFoldChart()">
                                                        <option value="stock">주가</option>
                                                        <option value="credit">신용공여</option>
                                                        <option value="sales">매출액</option>
                                                        <option value="grade">재무위험등급</option>
                                                        <option value="sinyong">신용평가등급</option>
                                                    </select>

                                                    <span style="float: right;" id="maximizeStockSpan"><i
                                                            class="maximize"
                                                            id="maximizeStock"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></i></span>


                                                    <select size="1" id='stockRange' class='select'
                                                        style="margin-left: 10px;">
                                                    </select>



                                                </div>

                                                <div class="chart_area" style=" height: 15.5vw;">
                                                    <div class="chart" id="stockTime">
                                                        <script>
                                                        </script>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>




                    <br>
                    <div id='tableDiv' style='display:block'>

                        <!-- news section -->
                        <div class="section" id="contents_section_news">

                            <span class="hiihihihiihidden">
                                <span id='pagination-container'>

                                </span>
                            </span>

                            <div id="result_area_news">

                            </div>

                            <div id="result_area_subsidiary">

                            </div>

                            <div id="result_area_industry">

                            </div>

                        </div>




                        <!-- report section -->
                        <div class="section" id="contents_section_report">


                            <div id="result_area_report">

                            </div>

                        </div>




                    </div>


                </div>



                <!-- modal area -->
                <div id="myModal" class="modal">
                    <!-- Modal content -->
                </div>

                <div id="chartModal" class="modal">
                    <!-- Modal content -->
                </div>

            </div>







        </div>
    </div>

    <!-- [D] 마크업 확인용 js, 개발시 제거하세요. -->

    <script type="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/ui-common.js"></script>




    <script type="text/javascript">

        function close_pop(flag) {
            $('#myModal').hide();
        };
        $('.maximize').on('click', function () {
            $('.layer_dimmed').addClass('is_active');
        });
        $(window).resize(function () {
            d3.selectAll('.visSVG').remove();
            makeGauge('dangerGauge', window.newsChartData.averageScore)
            makeCombinedGraph(window.newsChartData.sentimentData, window.newsChartData.allNews, 'articleCounts');
            makeKeywordBarPlot(window.newsChartData.keywords, 'keywordBar', document.getElementById('keywordBarSlider').value)
            makeStockBarGraph(window.newsChartData.allStockData, 'stockTime');
            makeSentimentBoxPlot(window.newsChartData.sentimentData, 'sentimentBoxPlot');
            makeWordcloud(window.newsChartData.keywords);
            //console.log('resized')
        });
        $('.stockPoint').on("scroll", function (e) {
            //console.log('scrolling on point')
            $('.stocksScroller').trigger('scroll', e);
        })
        $("#keywordBarSlider").on("input", function () {
            document.getElementById('keywordMaxValueBar').innerHTML = document.getElementById('keywordBarSlider').value;
            makeKeywordBarPlot(window.newsChartData.keywords, 'enlargedChart', document.getElementById('keywordBarSlider').value)
            //makeKeywordBarPlot(window.newsChartData.keywords, 'keywordBar', document.getElementById('keywordBarSlider').value)
        })
        $(".card_list").css('max-height', $(".contents_panel:first").height())
        //console.log($(".contents_panel:first").height());

        /* ------------------ ALL CLOSE MODAL FUNCTIONS ------------------ */
        // modal
        $('.layer_dimmed .btn_close').on('click', function () {
            $(this).parents('.layer_dimmed').removeClass('is_active');
            $('.enlargedChartSettings').css("display", "none");
            document.getElementById('enlargedChart').innerHTML = ''
            /* $('.stockLine').attr('clip-path', 'url(#stockClip)'); */
        });


        //close if click outside
        $(document).mouseup(function (e) {
            var chartEnlargedContainer = $('.layer_dimmed .layer_box');
            var articleTitle = $('.modal .modal-title');
            var articleContent = $('.modal .modal-content');
            var companyListTitle = $('.modal .modal-list-head');
            var companyList = $('.modal .modal-list');
            if (!chartEnlargedContainer.is(e.target) && chartEnlargedContainer.has(e.target).length === 0) {
                $('.layer_dimmed').removeClass('is_active');
                $('.enlargedChartSettings').css("display", "none");
                document.getElementById('enlargedChart').innerHTML = ''
                /*  $('.stockLine').attr('clip-path', 'url(#stockClip)'); */
            }
            if (!articleContent.is(e.target) && !articleTitle.is(e.target) && articleContent.has(e.target).length === 0 && articleTitle.has(e.target).length === 0 && 
            !companyListTitle.is(e.target) && !companyList.is(e.target) && companyListTitle.has(e.target).length === 0 && companyList.has(e.target).length === 0) {
                close_pop();
            }
        });

        //close if escape is pressed
        $(document).on('keydown', function (e) {
            if (e.keyCode === 27) { // ESC
                $('.layer_dimmed').removeClass('is_active');
                $('.enlargedChartSettings').css("display", "none");
                document.getElementById('enlargedChart').innerHTML = ''
                close_pop();
                /*  $('.stockLine').attr('clip-path', 'url(#stockClip)'); */
            }
        });

        $('#downloadButton').on('click', function () {
            var svg = window.SVG
            var svgString = getSVGString(svg.node());
            svgToImage(svgString, 1250, 550, 'png', save)

            var method = document.getElementById('fold').value;
            //console.log(method)
            var allParams = parameters()

            if (method == 'company') {
                var term = '기업_' + window.companyName;
            } else if (method == 'subsidiary') {
                var term = '계열_' + window.subsidiary;
            } else if (method == 'industry') {
                var term = '산업_' + window.industry;
            } else {
                var term = '키워드_' + allParams.searchWord;
            }

            if (allParams.gubun == 'year') {
                var fileName = term + '_' + allParams.newsYear + '년.png'
            } else if (allParams.gubun == 'quarter') {
                var fileName = term + '_' + allParams.newsYear + '년' + allParams.gubunItem + '분기.png'
            } else if (allParams.gubun == 'month') {
                var fileName = term + '_' + allParams.newsYear + '년' + allParams.gubunItem + '월.png'
            } else {
                var fileName = term + '_' + allParams.startDate.replace(/\//g, '-') + '~' + allParams.endDate.replace(/\//g, '-') + '.png'
            }


            function save(dataBlob, filesize) {
                saveAs(dataBlob, fileName); // FileSaver.js function
            }
            //console.log('saved')
        })


    </script>
</body>

</html>